/*!
 * l10n-angular 0.1.0 2014-02-11
 * Copyright 2013 Andrew Kulinich. Released under the MIT license
 */
(function(){var t,e=[].slice;t=function(e){return angular.forEach(arguments,function(n){return n!==e?angular.forEach(n,function(n,r){return e[r]&&e[r].constructor&&e[r].constructor===Object?t(e[r],n):e[r]=n}):void 0}),e},angular.module("l10n",["ngLocale"]).provider("l10n",{db:{},localeMessages:{},add:function(e,n){var r,s,a;for(s=0,a=n.length;a>s;s++)r=n[s],angular.isFunction(this.db[method])&&(n["$"+r]=n[r],delete n[r]);return this.localeMessages[e]===void 0&&(this.localeMessages[e]={}),t(this.localeMessages[e],n)},setLocale:function(t){var e;for(e in this.db)angular.isFunction(this.db[e])||delete this.db[e];return angular.extend(this.db,this.localeMessages[t])},$get:["$rootScope","$locale",function(t,n){var r=this;return this.setLocale(n.id),this.db.getAllLocales=function(){return r.localeMessages},this.db.setLocale=function(e){return n.id=e,r.setLocale(e),t.$broadcast("l10n-locale",e)},this.db.getLocale=function(){return n.id},this.db.get=function(){var t,n,r,s,a,i,o,l;if(t=arguments[0],o=arguments.length>=2?e.call(arguments,1):[],!t)return"";for(r=t,angular.isFunction(this[t])&&(t="$"+t),s=this;(a=t.indexOf("."))>0;){if(i=t.substr(a+1),t=t.substr(0,a),void 0===s[t])return r;s=s[t],t=i}if(l=s[t],null==l)return r;if("string"==typeof l){for(;"@"===l.charAt(0);)n=this.get(l.substr(1)),n!==void 0&&(l=n);l.length>=2&&"\\"===l.charAt(0)&&"@"===l.charAt(1)&&(l=l.substr(1));for(var u=0;o.length>u;u++)l=l.replace(RegExp("%"+(u+1)+"([^\\d]|$)","g"),o[u]+"$1")}return l},this.db}]})}).call(this);